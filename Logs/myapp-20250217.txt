2025-02-17 10:43:28.684 +05:00 [INF] Executed DbCommand (38ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-02-17 10:43:28.752 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-02-17 10:43:28.863 +05:00 [INF] User profile is available. Using 'C:\Users\zhanarys\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-02-17 10:43:29.033 +05:00 [INF] Request starting HTTP/2 GET https://localhost:44336/swagger/index.html - null null
2025-02-17 10:43:29.097 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-02-17 10:43:29.097 +05:00 [INF] Hosting environment: Development
2025-02-17 10:43:29.097 +05:00 [INF] Content root path: C:\Users\zhanarys\source\repos\QuizMasterAPI\QuizMasterAPI
2025-02-17 10:43:32.654 +05:00 [INF] Request finished HTTP/2 GET https://localhost:44336/swagger/index.html - 200 null text/html;charset=utf-8 3626.8145ms
2025-02-17 10:43:33.912 +05:00 [INF] Request starting HTTP/2 GET https://localhost:44336/_vs/browserLink - null null
2025-02-17 10:43:33.912 +05:00 [INF] Request starting HTTP/2 GET https://localhost:44336/_framework/aspnetcore-browser-refresh.js - null null
2025-02-17 10:43:33.919 +05:00 [INF] Request finished HTTP/2 GET https://localhost:44336/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 4.3991ms
2025-02-17 10:43:33.962 +05:00 [INF] Request finished HTTP/2 GET https://localhost:44336/_vs/browserLink - 200 null text/javascript; charset=UTF-8 50.0154ms
2025-02-17 10:43:34.002 +05:00 [INF] Request starting HTTP/2 GET https://localhost:44336/swagger/v1/swagger.json - null null
2025-02-17 10:43:34.049 +05:00 [INF] Request finished HTTP/2 GET https://localhost:44336/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 46.6426ms
2025-02-17 10:44:20.221 +05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44336/api/questions?page=1&pageSize=5 - null null
2025-02-17 10:44:20.265 +05:00 [INF] CORS policy execution successful.
2025-02-17 10:44:20.266 +05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44336/api/questions?page=1&pageSize=5 - 204 null null 45.3462ms
2025-02-17 10:44:20.268 +05:00 [INF] Request starting HTTP/2 GET https://localhost:44336/api/questions?page=1&pageSize=5 - null null
2025-02-17 10:44:20.270 +05:00 [INF] CORS policy execution successful.
2025-02-17 10:44:20.348 +05:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '16.02.2025 16:16:36', Current time (UTC): '17.02.2025 05:44:20'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-02-17 10:44:20.367 +05:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '16.02.2025 16:16:36', Current time (UTC): '17.02.2025 05:44:20'.
2025-02-17 10:44:20.371 +05:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-02-17 10:44:20.374 +05:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-02-17 10:44:20.375 +05:00 [INF] Request finished HTTP/2 GET https://localhost:44336/api/questions?page=1&pageSize=5 - 401 null null 106.7131ms
2025-02-17 10:44:26.019 +05:00 [INF] Request starting HTTP/2 GET https://localhost:44336/api/questions?page=1&pageSize=5 - null null
2025-02-17 10:44:26.020 +05:00 [INF] CORS policy execution successful.
2025-02-17 10:44:26.023 +05:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-02-17 10:44:26.024 +05:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-02-17 10:44:26.025 +05:00 [INF] Request finished HTTP/2 GET https://localhost:44336/api/questions?page=1&pageSize=5 - 401 null null 5.9484ms
2025-02-17 10:44:27.556 +05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44336/api/auth/login - null null
2025-02-17 10:44:27.557 +05:00 [INF] CORS policy execution successful.
2025-02-17 10:44:27.557 +05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44336/api/auth/login - 204 null null 1.0286ms
2025-02-17 10:44:27.559 +05:00 [INF] Request starting HTTP/2 POST https://localhost:44336/api/auth/login - application/json 49
2025-02-17 10:44:27.560 +05:00 [INF] CORS policy execution successful.
2025-02-17 10:44:27.561 +05:00 [INF] Executing endpoint 'QuizMasterAPI.Controllers.AuthController.Login (QuizMasterAPI)'
2025-02-17 10:44:27.588 +05:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(QuizMasterAPI.Models.DTOs.LoginDto) on controller QuizMasterAPI.Controllers.AuthController (QuizMasterAPI).
2025-02-17 10:44:27.617 +05:00 [INF] Запрос на логин пользователя: admin@gmail.com
2025-02-17 10:44:27.664 +05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[DateRegistered], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-02-17 10:44:27.794 +05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-02-17 10:44:27.801 +05:00 [INF] Пользователь admin@gmail.com успешно залогинился
2025-02-17 10:44:27.805 +05:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-17 10:44:27.810 +05:00 [INF] Executed action QuizMasterAPI.Controllers.AuthController.Login (QuizMasterAPI) in 218.831ms
2025-02-17 10:44:27.811 +05:00 [INF] Executed endpoint 'QuizMasterAPI.Controllers.AuthController.Login (QuizMasterAPI)'
2025-02-17 10:44:27.814 +05:00 [INF] Request finished HTTP/2 POST https://localhost:44336/api/auth/login - 200 null application/json; charset=utf-8 255.2747ms
2025-02-17 10:44:27.823 +05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44336/api/questions?page=1&pageSize=5 - null null
2025-02-17 10:44:27.824 +05:00 [INF] CORS policy execution successful.
2025-02-17 10:44:27.824 +05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44336/api/questions?page=1&pageSize=5 - 204 null null 0.7917ms
2025-02-17 10:44:27.826 +05:00 [INF] Request starting HTTP/2 GET https://localhost:44336/api/questions?page=1&pageSize=5 - null null
2025-02-17 10:44:27.826 +05:00 [INF] CORS policy execution successful.
2025-02-17 10:44:27.837 +05:00 [INF] Executing endpoint 'QuizMasterAPI.Controllers.QuestionsController.GetAllQuestions (QuizMasterAPI)'
2025-02-17 10:44:27.841 +05:00 [INF] Route matched with {action = "GetAllQuestions", controller = "Questions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[QuizMasterAPI.Models.DTOs.PaginatedResponse`1[QuestionDto]]] GetAllQuestions(Int32, Int32) on controller QuizMasterAPI.Controllers.QuestionsController (QuizMasterAPI).
2025-02-17 10:44:27.942 +05:00 [INF] Вход в GetAllQuestions() c пагинацией: page=1, pageSize=5
2025-02-17 10:44:27.943 +05:00 [INF] GetAllQuestionsPaginatedAsync(page=1, pageSize=5)
2025-02-17 10:44:27.970 +05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Questions] AS [q]
2025-02-17 10:44:28.028 +05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [q0].[Id], [q0].[CorrectTextAnswer], [q0].[QuestionType], [q0].[Text], [q0].[TopicId], [t].[Id], [a].[Id], [a].[IsCorrect], [a].[QuestionId], [a].[Text], [t].[CategoryId], [t].[Name]
FROM (
    SELECT [q].[Id], [q].[CorrectTextAnswer], [q].[QuestionType], [q].[Text], [q].[TopicId]
    FROM [Questions] AS [q]
    ORDER BY [q].[Id]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [q0]
LEFT JOIN [Topics] AS [t] ON [q0].[TopicId] = [t].[Id]
LEFT JOIN [AnswerOptions] AS [a] ON [q0].[Id] = [a].[QuestionId]
ORDER BY [q0].[Id], [t].[Id]
2025-02-17 10:44:28.075 +05:00 [INF] Executing OkObjectResult, writing value of type 'QuizMasterAPI.Models.DTOs.PaginatedResponse`1[[QuestionDto, QuizMasterAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-02-17 10:44:28.081 +05:00 [INF] Executed action QuizMasterAPI.Controllers.QuestionsController.GetAllQuestions (QuizMasterAPI) in 239.5797ms
2025-02-17 10:44:28.082 +05:00 [INF] Executed endpoint 'QuizMasterAPI.Controllers.QuestionsController.GetAllQuestions (QuizMasterAPI)'
2025-02-17 10:44:28.082 +05:00 [INF] Request finished HTTP/2 GET https://localhost:44336/api/questions?page=1&pageSize=5 - 200 null application/json; charset=utf-8 255.8831ms
2025-02-17 10:44:31.029 +05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44336/api/tests?page=1&pageSize=5 - null null
2025-02-17 10:44:31.030 +05:00 [INF] CORS policy execution successful.
2025-02-17 10:44:31.031 +05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44336/api/tests?page=1&pageSize=5 - 204 null null 1.1416ms
2025-02-17 10:44:31.037 +05:00 [INF] Request starting HTTP/2 GET https://localhost:44336/api/tests?page=1&pageSize=5 - null null
2025-02-17 10:44:31.037 +05:00 [INF] CORS policy execution successful.
2025-02-17 10:44:31.039 +05:00 [INF] Executing endpoint 'QuizMasterAPI.Controllers.TestsController.GetAllTests (QuizMasterAPI)'
2025-02-17 10:44:31.041 +05:00 [INF] Route matched with {action = "GetAllTests", controller = "Tests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[QuizMasterAPI.Models.DTOs.PaginatedResponse`1[QuizMasterAPI.Models.DTOs.TestDto]]] GetAllTests(Int32, Int32) on controller QuizMasterAPI.Controllers.TestsController (QuizMasterAPI).
2025-02-17 10:44:31.045 +05:00 [INF] Вход в GetAllTests c пагинацией: page=1, pageSize=5
2025-02-17 10:44:31.047 +05:00 [INF] GetAllTestsPaginatedAsync(page=1, pageSize=5, userId=0b2c8b40-ca96-446f-999f-1281c3589515, isAdmin=true)
2025-02-17 10:44:31.055 +05:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tests] AS [t]
2025-02-17 10:44:31.067 +05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t1].[Id], [t1].[CountOfQuestions], [t1].[CreatedAt], [t1].[IsPrivate], [t1].[IsRandom], [t1].[Name], [t1].[TestType], [t1].[TimeLimitMinutes], [t1].[TopicId], [t0].[Id], [t0].[CategoryId], [t0].[Name]
FROM (
    SELECT [t].[Id], [t].[CountOfQuestions], [t].[CreatedAt], [t].[IsPrivate], [t].[IsRandom], [t].[Name], [t].[TestType], [t].[TimeLimitMinutes], [t].[TopicId]
    FROM [Tests] AS [t]
    ORDER BY [t].[Id]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [Topics] AS [t0] ON [t1].[TopicId] = [t0].[Id]
ORDER BY [t1].[Id]
2025-02-17 10:44:31.090 +05:00 [INF] Executing OkObjectResult, writing value of type 'QuizMasterAPI.Models.DTOs.PaginatedResponse`1[[QuizMasterAPI.Models.DTOs.TestDto, QuizMasterAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-02-17 10:44:31.099 +05:00 [INF] Executed action QuizMasterAPI.Controllers.TestsController.GetAllTests (QuizMasterAPI) in 57.38ms
2025-02-17 10:44:31.099 +05:00 [INF] Executed endpoint 'QuizMasterAPI.Controllers.TestsController.GetAllTests (QuizMasterAPI)'
2025-02-17 10:44:31.099 +05:00 [INF] Request finished HTTP/2 GET https://localhost:44336/api/tests?page=1&pageSize=5 - 200 null application/json; charset=utf-8 62.5943ms
2025-02-17 10:44:33.761 +05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44336/api/Analytics/full/8009 - null null
2025-02-17 10:44:33.762 +05:00 [INF] CORS policy execution successful.
2025-02-17 10:44:33.762 +05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44336/api/Analytics/full/8009 - 204 null null 1.1171ms
2025-02-17 10:44:33.775 +05:00 [INF] Request starting HTTP/2 GET https://localhost:44336/api/Analytics/full/8009 - null null
2025-02-17 10:44:33.776 +05:00 [INF] CORS policy execution successful.
2025-02-17 10:44:33.777 +05:00 [INF] Executing endpoint 'QuizMasterAPI.Controllers.AnalyticsController.GetTestAnalyticsWithHistory (QuizMasterAPI)'
2025-02-17 10:44:33.780 +05:00 [INF] Route matched with {action = "GetTestAnalyticsWithHistory", controller = "Analytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[QuizMasterAPI.Models.DTOs.TestAnalyticsWithHistoryDto]] GetTestAnalyticsWithHistory(Int32) on controller QuizMasterAPI.Controllers.AnalyticsController (QuizMasterAPI).
2025-02-17 10:44:33.783 +05:00 [INF] GetTestAnalyticsWithHistory(TestId=8009)
2025-02-17 10:44:33.784 +05:00 [INF] GetTestAnalyticsAndHistoryAsync for TestId=8009
2025-02-17 10:44:33.787 +05:00 [INF] GetTestAnalyticsAsync for TestId=8009
2025-02-17 10:44:33.799 +05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__testId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[CountOfQuestions], [t].[CreatedAt], [t].[IsPrivate], [t].[IsRandom], [t].[Name], [t].[TestType], [t].[TimeLimitMinutes], [t].[TopicId], [t0].[Id], [t0].[CategoryId], [t0].[Name]
FROM [Tests] AS [t]
LEFT JOIN [Topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [t].[Id] = @__testId_0
2025-02-17 10:44:33.810 +05:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-02-17 10:44:33.846 +05:00 [INF] Executed DbCommand (9ms) [Parameters=[@__testId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[CorrectAnswers], [u].[DateCreated], [u].[EndTime], [u].[ExpireTime], [u].[IsPassed], [u].[StartTime], [u].[TestId], [u].[TimeSpentSeconds], [u].[TotalQuestions], [u].[UserId], [s].[Id], [s].[QuestionId], [s].[UserTestId], [s].[Id0], [s].[Id1], [s].[AnswerOptionId], [s].[UserTestQuestionId], [s].[UserTextAnswer], [s].[CorrectTextAnswer], [s].[QuestionType], [s].[Text], [s].[TopicId]
FROM [UserTests] AS [u]
LEFT JOIN (
    SELECT [u0].[Id], [u0].[QuestionId], [u0].[UserTestId], [q].[Id] AS [Id0], [u1].[Id] AS [Id1], [u1].[AnswerOptionId], [u1].[UserTestQuestionId], [u1].[UserTextAnswer], [q].[CorrectTextAnswer], [q].[QuestionType], [q].[Text], [q].[TopicId]
    FROM [UserTestQuestions] AS [u0]
    INNER JOIN [Questions] AS [q] ON [u0].[QuestionId] = [q].[Id]
    LEFT JOIN [UserTestAnswers] AS [u1] ON [u0].[Id] = [u1].[UserTestQuestionId]
) AS [s] ON [u].[Id] = [s].[UserTestId]
WHERE [u].[TestId] = @__testId_0
ORDER BY [u].[Id], [s].[Id], [s].[Id0]
2025-02-17 10:44:33.897 +05:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-02-17 10:44:33.965 +05:00 [INF] Executed DbCommand (12ms) [Parameters=[@__testId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[CorrectAnswers], [u].[DateCreated], [u].[EndTime], [u].[ExpireTime], [u].[IsPassed], [u].[StartTime], [u].[TestId], [u].[TimeSpentSeconds], [u].[TotalQuestions], [u].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[DateRegistered], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [t].[Id], [t].[CountOfQuestions], [t].[CreatedAt], [t].[IsPrivate], [t].[IsRandom], [t].[Name], [t].[TestType], [t].[TimeLimitMinutes], [t].[TopicId], [t0].[Id], [t0].[CategoryId], [t0].[Name], [s].[Id], [s].[QuestionId], [s].[UserTestId], [s].[Id0], [s].[Id1], [s].[AnswerOptionId], [s].[UserTestQuestionId], [s].[UserTextAnswer], [s].[CorrectTextAnswer], [s].[QuestionType], [s].[Text], [s].[TopicId], [s].[Id2], [s].[IsCorrect], [s].[QuestionId0], [s].[Text0]
FROM [UserTests] AS [u]
INNER JOIN [AspNetUsers] AS [a] ON [u].[UserId] = [a].[Id]
INNER JOIN [Tests] AS [t] ON [u].[TestId] = [t].[Id]
LEFT JOIN [Topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
LEFT JOIN (
    SELECT [u0].[Id], [u0].[QuestionId], [u0].[UserTestId], [q].[Id] AS [Id0], [u1].[Id] AS [Id1], [u1].[AnswerOptionId], [u1].[UserTestQuestionId], [u1].[UserTextAnswer], [q].[CorrectTextAnswer], [q].[QuestionType], [q].[Text], [q].[TopicId], [a0].[Id] AS [Id2], [a0].[IsCorrect], [a0].[QuestionId] AS [QuestionId0], [a0].[Text] AS [Text0]
    FROM [UserTestQuestions] AS [u0]
    INNER JOIN [Questions] AS [q] ON [u0].[QuestionId] = [q].[Id]
    LEFT JOIN [UserTestAnswers] AS [u1] ON [u0].[Id] = [u1].[UserTestQuestionId]
    LEFT JOIN [AnswerOptions] AS [a0] ON [q].[Id] = [a0].[QuestionId]
) AS [s] ON [u].[Id] = [s].[UserTestId]
WHERE [u].[TestId] = @__testId_0
ORDER BY [u].[Id], [a].[Id], [t].[Id], [t0].[Id], [s].[Id], [s].[Id0], [s].[Id1]
2025-02-17 10:44:33.981 +05:00 [INF] Executing OkObjectResult, writing value of type 'QuizMasterAPI.Models.DTOs.TestAnalyticsWithHistoryDto'.
2025-02-17 10:44:33.994 +05:00 [INF] Executed action QuizMasterAPI.Controllers.AnalyticsController.GetTestAnalyticsWithHistory (QuizMasterAPI) in 214.3532ms
2025-02-17 10:44:33.994 +05:00 [INF] Executed endpoint 'QuizMasterAPI.Controllers.AnalyticsController.GetTestAnalyticsWithHistory (QuizMasterAPI)'
2025-02-17 10:44:33.995 +05:00 [INF] Request finished HTTP/2 GET https://localhost:44336/api/Analytics/full/8009 - 200 null application/json; charset=utf-8 219.6618ms
2025-02-17 10:44:48.031 +05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44336/api/Analytics/full/8009 - null null
2025-02-17 10:44:48.032 +05:00 [INF] CORS policy execution successful.
2025-02-17 10:44:48.032 +05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44336/api/Analytics/full/8009 - 204 null null 0.6646ms
2025-02-17 10:44:48.034 +05:00 [INF] Request starting HTTP/2 GET https://localhost:44336/api/Analytics/full/8009 - null null
2025-02-17 10:44:48.034 +05:00 [INF] CORS policy execution successful.
2025-02-17 10:44:48.035 +05:00 [INF] Executing endpoint 'QuizMasterAPI.Controllers.AnalyticsController.GetTestAnalyticsWithHistory (QuizMasterAPI)'
2025-02-17 10:44:48.035 +05:00 [INF] Route matched with {action = "GetTestAnalyticsWithHistory", controller = "Analytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[QuizMasterAPI.Models.DTOs.TestAnalyticsWithHistoryDto]] GetTestAnalyticsWithHistory(Int32) on controller QuizMasterAPI.Controllers.AnalyticsController (QuizMasterAPI).
2025-02-17 10:44:48.036 +05:00 [INF] GetTestAnalyticsWithHistory(TestId=8009)
2025-02-17 10:44:48.036 +05:00 [INF] GetTestAnalyticsAndHistoryAsync for TestId=8009
2025-02-17 10:44:48.036 +05:00 [INF] GetTestAnalyticsAsync for TestId=8009
2025-02-17 10:44:48.039 +05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__testId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[CountOfQuestions], [t].[CreatedAt], [t].[IsPrivate], [t].[IsRandom], [t].[Name], [t].[TestType], [t].[TimeLimitMinutes], [t].[TopicId], [t0].[Id], [t0].[CategoryId], [t0].[Name]
FROM [Tests] AS [t]
LEFT JOIN [Topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [t].[Id] = @__testId_0
2025-02-17 10:44:48.046 +05:00 [INF] Executed DbCommand (6ms) [Parameters=[@__testId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[CorrectAnswers], [u].[DateCreated], [u].[EndTime], [u].[ExpireTime], [u].[IsPassed], [u].[StartTime], [u].[TestId], [u].[TimeSpentSeconds], [u].[TotalQuestions], [u].[UserId], [s].[Id], [s].[QuestionId], [s].[UserTestId], [s].[Id0], [s].[Id1], [s].[AnswerOptionId], [s].[UserTestQuestionId], [s].[UserTextAnswer], [s].[CorrectTextAnswer], [s].[QuestionType], [s].[Text], [s].[TopicId]
FROM [UserTests] AS [u]
LEFT JOIN (
    SELECT [u0].[Id], [u0].[QuestionId], [u0].[UserTestId], [q].[Id] AS [Id0], [u1].[Id] AS [Id1], [u1].[AnswerOptionId], [u1].[UserTestQuestionId], [u1].[UserTextAnswer], [q].[CorrectTextAnswer], [q].[QuestionType], [q].[Text], [q].[TopicId]
    FROM [UserTestQuestions] AS [u0]
    INNER JOIN [Questions] AS [q] ON [u0].[QuestionId] = [q].[Id]
    LEFT JOIN [UserTestAnswers] AS [u1] ON [u0].[Id] = [u1].[UserTestQuestionId]
) AS [s] ON [u].[Id] = [s].[UserTestId]
WHERE [u].[TestId] = @__testId_0
ORDER BY [u].[Id], [s].[Id], [s].[Id0]
2025-02-17 10:44:48.060 +05:00 [INF] Executed DbCommand (11ms) [Parameters=[@__testId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[CorrectAnswers], [u].[DateCreated], [u].[EndTime], [u].[ExpireTime], [u].[IsPassed], [u].[StartTime], [u].[TestId], [u].[TimeSpentSeconds], [u].[TotalQuestions], [u].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[DateRegistered], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [t].[Id], [t].[CountOfQuestions], [t].[CreatedAt], [t].[IsPrivate], [t].[IsRandom], [t].[Name], [t].[TestType], [t].[TimeLimitMinutes], [t].[TopicId], [t0].[Id], [t0].[CategoryId], [t0].[Name], [s].[Id], [s].[QuestionId], [s].[UserTestId], [s].[Id0], [s].[Id1], [s].[AnswerOptionId], [s].[UserTestQuestionId], [s].[UserTextAnswer], [s].[CorrectTextAnswer], [s].[QuestionType], [s].[Text], [s].[TopicId], [s].[Id2], [s].[IsCorrect], [s].[QuestionId0], [s].[Text0]
FROM [UserTests] AS [u]
INNER JOIN [AspNetUsers] AS [a] ON [u].[UserId] = [a].[Id]
INNER JOIN [Tests] AS [t] ON [u].[TestId] = [t].[Id]
LEFT JOIN [Topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
LEFT JOIN (
    SELECT [u0].[Id], [u0].[QuestionId], [u0].[UserTestId], [q].[Id] AS [Id0], [u1].[Id] AS [Id1], [u1].[AnswerOptionId], [u1].[UserTestQuestionId], [u1].[UserTextAnswer], [q].[CorrectTextAnswer], [q].[QuestionType], [q].[Text], [q].[TopicId], [a0].[Id] AS [Id2], [a0].[IsCorrect], [a0].[QuestionId] AS [QuestionId0], [a0].[Text] AS [Text0]
    FROM [UserTestQuestions] AS [u0]
    INNER JOIN [Questions] AS [q] ON [u0].[QuestionId] = [q].[Id]
    LEFT JOIN [UserTestAnswers] AS [u1] ON [u0].[Id] = [u1].[UserTestQuestionId]
    LEFT JOIN [AnswerOptions] AS [a0] ON [q].[Id] = [a0].[QuestionId]
) AS [s] ON [u].[Id] = [s].[UserTestId]
WHERE [u].[TestId] = @__testId_0
ORDER BY [u].[Id], [a].[Id], [t].[Id], [t0].[Id], [s].[Id], [s].[Id0], [s].[Id1]
2025-02-17 10:44:48.062 +05:00 [INF] Executing OkObjectResult, writing value of type 'QuizMasterAPI.Models.DTOs.TestAnalyticsWithHistoryDto'.
2025-02-17 10:44:48.063 +05:00 [INF] Executed action QuizMasterAPI.Controllers.AnalyticsController.GetTestAnalyticsWithHistory (QuizMasterAPI) in 28.1731ms
2025-02-17 10:44:48.063 +05:00 [INF] Executed endpoint 'QuizMasterAPI.Controllers.AnalyticsController.GetTestAnalyticsWithHistory (QuizMasterAPI)'
2025-02-17 10:44:48.063 +05:00 [INF] Request finished HTTP/2 GET https://localhost:44336/api/Analytics/full/8009 - 200 null application/json; charset=utf-8 29.5373ms
2025-02-17 10:45:00.399 +05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44336/api/UserTests/start/8009 - null null
2025-02-17 10:45:00.400 +05:00 [INF] CORS policy execution successful.
2025-02-17 10:45:00.400 +05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44336/api/UserTests/start/8009 - 204 null null 1.3259ms
2025-02-17 10:45:00.405 +05:00 [INF] Request starting HTTP/2 POST https://localhost:44336/api/UserTests/start/8009 - application/json 2
2025-02-17 10:45:00.408 +05:00 [INF] CORS policy execution successful.
2025-02-17 10:45:00.409 +05:00 [INF] Executing endpoint 'UserTestsController.StartTest (QuizMasterAPI)'
2025-02-17 10:45:00.415 +05:00 [INF] Route matched with {action = "StartTest", controller = "UserTests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[QuizMasterAPI.Models.DTOs.UserTestDto]] StartTest(Int32) on controller UserTestsController (QuizMasterAPI).
2025-02-17 10:45:00.418 +05:00 [INF] Вход в StartTest(TestId=8009)
2025-02-17 10:45:00.420 +05:00 [INF] Старт теста 8009 для пользователя 0b2c8b40-ca96-446f-999f-1281c3589515
2025-02-17 10:45:00.430 +05:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-02-17 10:45:00.464 +05:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[CountOfQuestions], [s].[CreatedAt], [s].[IsPrivate], [s].[IsRandom], [s].[Name], [s].[TestType], [s].[TimeLimitMinutes], [s].[TopicId], [s].[Id0], [s].[CategoryId], [s].[Name0], [s0].[Id], [s0].[QuestionId], [s0].[TestId], [s0].[Id0], [s0].[CorrectTextAnswer], [s0].[QuestionType], [s0].[Text], [s0].[TopicId], [s0].[Id1], [s0].[IsCorrect], [s0].[QuestionId0], [s0].[Text0]
FROM (
    SELECT TOP(1) [t].[Id], [t].[CountOfQuestions], [t].[CreatedAt], [t].[IsPrivate], [t].[IsRandom], [t].[Name], [t].[TestType], [t].[TimeLimitMinutes], [t].[TopicId], [t0].[Id] AS [Id0], [t0].[CategoryId], [t0].[Name] AS [Name0]
    FROM [Tests] AS [t]
    LEFT JOIN [Topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
    WHERE [t].[Id] = @__id_0
) AS [s]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[QuestionId], [t1].[TestId], [q].[Id] AS [Id0], [q].[CorrectTextAnswer], [q].[QuestionType], [q].[Text], [q].[TopicId], [a].[Id] AS [Id1], [a].[IsCorrect], [a].[QuestionId] AS [QuestionId0], [a].[Text] AS [Text0]
    FROM [TestQuestions] AS [t1]
    INNER JOIN [Questions] AS [q] ON [t1].[QuestionId] = [q].[Id]
    LEFT JOIN [AnswerOptions] AS [a] ON [q].[Id] = [a].[QuestionId]
) AS [s0] ON [s].[Id] = [s0].[TestId]
ORDER BY [s].[Id], [s].[Id0], [s0].[Id], [s0].[Id0]
2025-02-17 10:45:00.569 +05:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserTests] ([CorrectAnswers], [DateCreated], [EndTime], [ExpireTime], [IsPassed], [StartTime], [TestId], [TimeSpentSeconds], [TotalQuestions], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-02-17 10:45:00.602 +05:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [UserTestQuestions] USING (
VALUES (@p0, @p1, 0),
(@p2, @p3, 1),
(@p4, @p5, 2),
(@p6, @p7, 3),
(@p8, @p9, 4)) AS i ([QuestionId], [UserTestId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([QuestionId], [UserTestId])
VALUES (i.[QuestionId], i.[UserTestId])
OUTPUT INSERTED.[Id], i._Position;
2025-02-17 10:45:00.608 +05:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-02-17 10:45:00.635 +05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userTestId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u1].[Id], [u1].[CorrectAnswers], [u1].[DateCreated], [u1].[EndTime], [u1].[ExpireTime], [u1].[IsPassed], [u1].[StartTime], [u1].[TestId], [u1].[TimeSpentSeconds], [u1].[TotalQuestions], [u1].[UserId], [s].[Id], [s].[QuestionId], [s].[UserTestId], [s].[Id0], [s].[CorrectTextAnswer], [s].[QuestionType], [s].[Text], [s].[TopicId], [s].[Id1], [s].[IsCorrect], [s].[QuestionId0], [s].[Text0]
FROM (
    SELECT TOP(1) [u].[Id], [u].[CorrectAnswers], [u].[DateCreated], [u].[EndTime], [u].[ExpireTime], [u].[IsPassed], [u].[StartTime], [u].[TestId], [u].[TimeSpentSeconds], [u].[TotalQuestions], [u].[UserId]
    FROM [UserTests] AS [u]
    WHERE [u].[Id] = @__userTestId_0
) AS [u1]
LEFT JOIN (
    SELECT [u0].[Id], [u0].[QuestionId], [u0].[UserTestId], [q].[Id] AS [Id0], [q].[CorrectTextAnswer], [q].[QuestionType], [q].[Text], [q].[TopicId], [a].[Id] AS [Id1], [a].[IsCorrect], [a].[QuestionId] AS [QuestionId0], [a].[Text] AS [Text0]
    FROM [UserTestQuestions] AS [u0]
    INNER JOIN [Questions] AS [q] ON [u0].[QuestionId] = [q].[Id]
    LEFT JOIN [AnswerOptions] AS [a] ON [q].[Id] = [a].[QuestionId]
) AS [s] ON [u1].[Id] = [s].[UserTestId]
ORDER BY [u1].[Id], [s].[Id], [s].[Id0]
2025-02-17 10:45:00.643 +05:00 [INF] Executing OkObjectResult, writing value of type 'QuizMasterAPI.Models.DTOs.UserTestDto'.
2025-02-17 10:45:00.646 +05:00 [INF] Executed action UserTestsController.StartTest (QuizMasterAPI) in 230.9737ms
2025-02-17 10:45:00.646 +05:00 [INF] Executed endpoint 'UserTestsController.StartTest (QuizMasterAPI)'
2025-02-17 10:45:00.646 +05:00 [INF] Request finished HTTP/2 POST https://localhost:44336/api/UserTests/start/8009 - 200 null application/json; charset=utf-8 241.2006ms
2025-02-17 10:45:24.992 +05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44336/api/UserTestAnswers/21017/save - null null
2025-02-17 10:45:24.992 +05:00 [INF] CORS policy execution successful.
2025-02-17 10:45:24.993 +05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44336/api/UserTestAnswers/21017/save - 204 null null 0.7188ms
2025-02-17 10:45:24.995 +05:00 [INF] Request starting HTTP/2 POST https://localhost:44336/api/UserTestAnswers/21017/save - application/json 312
2025-02-17 10:45:24.996 +05:00 [INF] CORS policy execution successful.
2025-02-17 10:45:24.996 +05:00 [INF] Executing endpoint 'UserTestAnswersController.SaveAnswers (QuizMasterAPI)'
2025-02-17 10:45:24.999 +05:00 [INF] Route matched with {action = "SaveAnswers", controller = "UserTestAnswers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SaveAnswers(Int32, System.Collections.Generic.List`1[QuizMasterAPI.Models.DTOs.UserAnswerSubmitDto]) on controller UserTestAnswersController (QuizMasterAPI).
2025-02-17 10:45:25.012 +05:00 [INF] SaveAnswers(UserTestId=21017), Count=5
2025-02-17 10:45:25.013 +05:00 [INF] SaveAnswersAsync(UserTestId=21017, CountAnswers=5)
2025-02-17 10:45:25.021 +05:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-02-17 10:45:25.078 +05:00 [INF] Executed DbCommand (10ms) [Parameters=[@__userTestId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[CorrectAnswers], [s].[DateCreated], [s].[EndTime], [s].[ExpireTime], [s].[IsPassed], [s].[StartTime], [s].[TestId], [s].[TimeSpentSeconds], [s].[TotalQuestions], [s].[UserId], [s].[Id0], [s].[CountOfQuestions], [s].[CreatedAt], [s].[IsPrivate], [s].[IsRandom], [s].[Name], [s].[TestType], [s].[TimeLimitMinutes], [s].[TopicId], [s0].[Id], [s0].[QuestionId], [s0].[UserTestId], [s0].[Id0], [s0].[Id1], [s0].[AnswerOptionId], [s0].[UserTestQuestionId], [s0].[UserTextAnswer], [s0].[CorrectTextAnswer], [s0].[QuestionType], [s0].[Text], [s0].[TopicId], [s0].[Id2], [s0].[IsCorrect], [s0].[QuestionId0], [s0].[Text0]
FROM (
    SELECT TOP(1) [u].[Id], [u].[CorrectAnswers], [u].[DateCreated], [u].[EndTime], [u].[ExpireTime], [u].[IsPassed], [u].[StartTime], [u].[TestId], [u].[TimeSpentSeconds], [u].[TotalQuestions], [u].[UserId], [t].[Id] AS [Id0], [t].[CountOfQuestions], [t].[CreatedAt], [t].[IsPrivate], [t].[IsRandom], [t].[Name], [t].[TestType], [t].[TimeLimitMinutes], [t].[TopicId]
    FROM [UserTests] AS [u]
    INNER JOIN [Tests] AS [t] ON [u].[TestId] = [t].[Id]
    WHERE [u].[Id] = @__userTestId_0
) AS [s]
LEFT JOIN (
    SELECT [u0].[Id], [u0].[QuestionId], [u0].[UserTestId], [q].[Id] AS [Id0], [u1].[Id] AS [Id1], [u1].[AnswerOptionId], [u1].[UserTestQuestionId], [u1].[UserTextAnswer], [q].[CorrectTextAnswer], [q].[QuestionType], [q].[Text], [q].[TopicId], [a].[Id] AS [Id2], [a].[IsCorrect], [a].[QuestionId] AS [QuestionId0], [a].[Text] AS [Text0]
    FROM [UserTestQuestions] AS [u0]
    INNER JOIN [Questions] AS [q] ON [u0].[QuestionId] = [q].[Id]
    LEFT JOIN [UserTestAnswers] AS [u1] ON [u0].[Id] = [u1].[UserTestQuestionId]
    LEFT JOIN [AnswerOptions] AS [a] ON [q].[Id] = [a].[QuestionId]
) AS [s0] ON [s].[Id] = [s0].[UserTestId]
ORDER BY [s].[Id], [s].[Id0], [s0].[Id], [s0].[Id0], [s0].[Id1]
2025-02-17 10:45:25.101 +05:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 4000), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (Size = 4000), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [UserTestAnswers] USING (
VALUES (@p0, @p1, @p2, 0),
(@p3, @p4, @p5, 1),
(@p6, @p7, @p8, 2),
(@p9, @p10, @p11, 3),
(@p12, @p13, @p14, 4)) AS i ([AnswerOptionId], [UserTestQuestionId], [UserTextAnswer], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([AnswerOptionId], [UserTestQuestionId], [UserTextAnswer])
VALUES (i.[AnswerOptionId], i.[UserTestQuestionId], i.[UserTextAnswer])
OUTPUT INSERTED.[Id], i._Position;
2025-02-17 10:45:25.103 +05:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-17 10:45:25.104 +05:00 [INF] Executed action UserTestAnswersController.SaveAnswers (QuizMasterAPI) in 105.4125ms
2025-02-17 10:45:25.104 +05:00 [INF] Executed endpoint 'UserTestAnswersController.SaveAnswers (QuizMasterAPI)'
2025-02-17 10:45:25.105 +05:00 [INF] Request finished HTTP/2 POST https://localhost:44336/api/UserTestAnswers/21017/save - 200 null application/json; charset=utf-8 109.5391ms
2025-02-17 10:45:25.109 +05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44336/api/UserTestAnswers/21017/check - null null
2025-02-17 10:45:25.109 +05:00 [INF] CORS policy execution successful.
2025-02-17 10:45:25.109 +05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44336/api/UserTestAnswers/21017/check - 204 null null 0.5027ms
2025-02-17 10:45:25.111 +05:00 [INF] Request starting HTTP/2 GET https://localhost:44336/api/UserTestAnswers/21017/check - null null
2025-02-17 10:45:25.111 +05:00 [INF] CORS policy execution successful.
2025-02-17 10:45:25.112 +05:00 [INF] Executing endpoint 'UserTestAnswersController.CheckAnswers (QuizMasterAPI)'
2025-02-17 10:45:25.114 +05:00 [INF] Route matched with {action = "CheckAnswers", controller = "UserTestAnswers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[QuizMasterAPI.Models.DTOs.TestCheckResultDto]] CheckAnswers(Int32) on controller UserTestAnswersController (QuizMasterAPI).
2025-02-17 10:45:25.116 +05:00 [INF] CheckAnswers(UserTestId=21017)
2025-02-17 10:45:25.117 +05:00 [INF] CheckAnswersAsync(UserTestId=21017)
2025-02-17 10:45:25.119 +05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userTestId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[CorrectAnswers], [s].[DateCreated], [s].[EndTime], [s].[ExpireTime], [s].[IsPassed], [s].[StartTime], [s].[TestId], [s].[TimeSpentSeconds], [s].[TotalQuestions], [s].[UserId], [s].[Id0], [s].[CountOfQuestions], [s].[CreatedAt], [s].[IsPrivate], [s].[IsRandom], [s].[Name], [s].[TestType], [s].[TimeLimitMinutes], [s].[TopicId], [s0].[Id], [s0].[QuestionId], [s0].[UserTestId], [s0].[Id0], [s0].[Id1], [s0].[AnswerOptionId], [s0].[UserTestQuestionId], [s0].[UserTextAnswer], [s0].[CorrectTextAnswer], [s0].[QuestionType], [s0].[Text], [s0].[TopicId], [s0].[Id2], [s0].[IsCorrect], [s0].[QuestionId0], [s0].[Text0]
FROM (
    SELECT TOP(1) [u].[Id], [u].[CorrectAnswers], [u].[DateCreated], [u].[EndTime], [u].[ExpireTime], [u].[IsPassed], [u].[StartTime], [u].[TestId], [u].[TimeSpentSeconds], [u].[TotalQuestions], [u].[UserId], [t].[Id] AS [Id0], [t].[CountOfQuestions], [t].[CreatedAt], [t].[IsPrivate], [t].[IsRandom], [t].[Name], [t].[TestType], [t].[TimeLimitMinutes], [t].[TopicId]
    FROM [UserTests] AS [u]
    INNER JOIN [Tests] AS [t] ON [u].[TestId] = [t].[Id]
    WHERE [u].[Id] = @__userTestId_0
) AS [s]
LEFT JOIN (
    SELECT [u0].[Id], [u0].[QuestionId], [u0].[UserTestId], [q].[Id] AS [Id0], [u1].[Id] AS [Id1], [u1].[AnswerOptionId], [u1].[UserTestQuestionId], [u1].[UserTextAnswer], [q].[CorrectTextAnswer], [q].[QuestionType], [q].[Text], [q].[TopicId], [a].[Id] AS [Id2], [a].[IsCorrect], [a].[QuestionId] AS [QuestionId0], [a].[Text] AS [Text0]
    FROM [UserTestQuestions] AS [u0]
    INNER JOIN [Questions] AS [q] ON [u0].[QuestionId] = [q].[Id]
    LEFT JOIN [UserTestAnswers] AS [u1] ON [u0].[Id] = [u1].[UserTestQuestionId]
    LEFT JOIN [AnswerOptions] AS [a] ON [q].[Id] = [a].[QuestionId]
) AS [s0] ON [s].[Id] = [s0].[UserTestId]
ORDER BY [s].[Id], [s].[Id0], [s0].[Id], [s0].[Id0], [s0].[Id1]
2025-02-17 10:45:25.134 +05:00 [INF] Executed DbCommand (3ms) [Parameters=[@p10='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [UserTests] SET [CorrectAnswers] = @p0, [DateCreated] = @p1, [EndTime] = @p2, [ExpireTime] = @p3, [IsPassed] = @p4, [StartTime] = @p5, [TestId] = @p6, [TimeSpentSeconds] = @p7, [TotalQuestions] = @p8, [UserId] = @p9
OUTPUT 1
WHERE [Id] = @p10;
2025-02-17 10:45:25.136 +05:00 [INF] Executing OkObjectResult, writing value of type 'QuizMasterAPI.Models.DTOs.TestCheckResultDto'.
2025-02-17 10:45:25.138 +05:00 [INF] Executed action UserTestAnswersController.CheckAnswers (QuizMasterAPI) in 23.9834ms
2025-02-17 10:45:25.138 +05:00 [INF] Executed endpoint 'UserTestAnswersController.CheckAnswers (QuizMasterAPI)'
2025-02-17 10:45:25.138 +05:00 [INF] Request finished HTTP/2 GET https://localhost:44336/api/UserTestAnswers/21017/check - 200 null application/json; charset=utf-8 27.1085ms
2025-02-17 10:45:28.730 +05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44336/api/tests?page=1&pageSize=5 - null null
2025-02-17 10:45:28.731 +05:00 [INF] CORS policy execution successful.
2025-02-17 10:45:28.731 +05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44336/api/tests?page=1&pageSize=5 - 204 null null 1.1464ms
2025-02-17 10:45:28.736 +05:00 [INF] Request starting HTTP/2 GET https://localhost:44336/api/tests?page=1&pageSize=5 - null null
2025-02-17 10:45:28.737 +05:00 [INF] CORS policy execution successful.
2025-02-17 10:45:28.737 +05:00 [INF] Executing endpoint 'QuizMasterAPI.Controllers.TestsController.GetAllTests (QuizMasterAPI)'
2025-02-17 10:45:28.737 +05:00 [INF] Route matched with {action = "GetAllTests", controller = "Tests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[QuizMasterAPI.Models.DTOs.PaginatedResponse`1[QuizMasterAPI.Models.DTOs.TestDto]]] GetAllTests(Int32, Int32) on controller QuizMasterAPI.Controllers.TestsController (QuizMasterAPI).
2025-02-17 10:45:28.739 +05:00 [INF] Вход в GetAllTests c пагинацией: page=1, pageSize=5
2025-02-17 10:45:28.739 +05:00 [INF] GetAllTestsPaginatedAsync(page=1, pageSize=5, userId=0b2c8b40-ca96-446f-999f-1281c3589515, isAdmin=true)
2025-02-17 10:45:28.742 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tests] AS [t]
2025-02-17 10:45:28.745 +05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t1].[Id], [t1].[CountOfQuestions], [t1].[CreatedAt], [t1].[IsPrivate], [t1].[IsRandom], [t1].[Name], [t1].[TestType], [t1].[TimeLimitMinutes], [t1].[TopicId], [t0].[Id], [t0].[CategoryId], [t0].[Name]
FROM (
    SELECT [t].[Id], [t].[CountOfQuestions], [t].[CreatedAt], [t].[IsPrivate], [t].[IsRandom], [t].[Name], [t].[TestType], [t].[TimeLimitMinutes], [t].[TopicId]
    FROM [Tests] AS [t]
    ORDER BY [t].[Id]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [Topics] AS [t0] ON [t1].[TopicId] = [t0].[Id]
ORDER BY [t1].[Id]
2025-02-17 10:45:28.746 +05:00 [INF] Executing OkObjectResult, writing value of type 'QuizMasterAPI.Models.DTOs.PaginatedResponse`1[[QuizMasterAPI.Models.DTOs.TestDto, QuizMasterAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-02-17 10:45:28.747 +05:00 [INF] Executed action QuizMasterAPI.Controllers.TestsController.GetAllTests (QuizMasterAPI) in 9.0548ms
2025-02-17 10:45:28.747 +05:00 [INF] Executed endpoint 'QuizMasterAPI.Controllers.TestsController.GetAllTests (QuizMasterAPI)'
2025-02-17 10:45:28.747 +05:00 [INF] Request finished HTTP/2 GET https://localhost:44336/api/tests?page=1&pageSize=5 - 200 null application/json; charset=utf-8 11.0205ms
2025-02-17 10:45:30.504 +05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44336/api/Analytics/full/8009 - null null
2025-02-17 10:45:30.504 +05:00 [INF] CORS policy execution successful.
2025-02-17 10:45:30.504 +05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44336/api/Analytics/full/8009 - 204 null null 0.4707ms
2025-02-17 10:45:30.507 +05:00 [INF] Request starting HTTP/2 GET https://localhost:44336/api/Analytics/full/8009 - null null
2025-02-17 10:45:30.507 +05:00 [INF] CORS policy execution successful.
2025-02-17 10:45:30.508 +05:00 [INF] Executing endpoint 'QuizMasterAPI.Controllers.AnalyticsController.GetTestAnalyticsWithHistory (QuizMasterAPI)'
2025-02-17 10:45:30.508 +05:00 [INF] Route matched with {action = "GetTestAnalyticsWithHistory", controller = "Analytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[QuizMasterAPI.Models.DTOs.TestAnalyticsWithHistoryDto]] GetTestAnalyticsWithHistory(Int32) on controller QuizMasterAPI.Controllers.AnalyticsController (QuizMasterAPI).
2025-02-17 10:45:30.512 +05:00 [INF] GetTestAnalyticsWithHistory(TestId=8009)
2025-02-17 10:45:30.512 +05:00 [INF] GetTestAnalyticsAndHistoryAsync for TestId=8009
2025-02-17 10:45:30.512 +05:00 [INF] GetTestAnalyticsAsync for TestId=8009
2025-02-17 10:45:30.515 +05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__testId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[CountOfQuestions], [t].[CreatedAt], [t].[IsPrivate], [t].[IsRandom], [t].[Name], [t].[TestType], [t].[TimeLimitMinutes], [t].[TopicId], [t0].[Id], [t0].[CategoryId], [t0].[Name]
FROM [Tests] AS [t]
LEFT JOIN [Topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [t].[Id] = @__testId_0
2025-02-17 10:45:30.521 +05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__testId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[CorrectAnswers], [u].[DateCreated], [u].[EndTime], [u].[ExpireTime], [u].[IsPassed], [u].[StartTime], [u].[TestId], [u].[TimeSpentSeconds], [u].[TotalQuestions], [u].[UserId], [s].[Id], [s].[QuestionId], [s].[UserTestId], [s].[Id0], [s].[Id1], [s].[AnswerOptionId], [s].[UserTestQuestionId], [s].[UserTextAnswer], [s].[CorrectTextAnswer], [s].[QuestionType], [s].[Text], [s].[TopicId]
FROM [UserTests] AS [u]
LEFT JOIN (
    SELECT [u0].[Id], [u0].[QuestionId], [u0].[UserTestId], [q].[Id] AS [Id0], [u1].[Id] AS [Id1], [u1].[AnswerOptionId], [u1].[UserTestQuestionId], [u1].[UserTextAnswer], [q].[CorrectTextAnswer], [q].[QuestionType], [q].[Text], [q].[TopicId]
    FROM [UserTestQuestions] AS [u0]
    INNER JOIN [Questions] AS [q] ON [u0].[QuestionId] = [q].[Id]
    LEFT JOIN [UserTestAnswers] AS [u1] ON [u0].[Id] = [u1].[UserTestQuestionId]
) AS [s] ON [u].[Id] = [s].[UserTestId]
WHERE [u].[TestId] = @__testId_0
ORDER BY [u].[Id], [s].[Id], [s].[Id0]
2025-02-17 10:45:30.534 +05:00 [INF] Executed DbCommand (10ms) [Parameters=[@__testId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[CorrectAnswers], [u].[DateCreated], [u].[EndTime], [u].[ExpireTime], [u].[IsPassed], [u].[StartTime], [u].[TestId], [u].[TimeSpentSeconds], [u].[TotalQuestions], [u].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[DateRegistered], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [t].[Id], [t].[CountOfQuestions], [t].[CreatedAt], [t].[IsPrivate], [t].[IsRandom], [t].[Name], [t].[TestType], [t].[TimeLimitMinutes], [t].[TopicId], [t0].[Id], [t0].[CategoryId], [t0].[Name], [s].[Id], [s].[QuestionId], [s].[UserTestId], [s].[Id0], [s].[Id1], [s].[AnswerOptionId], [s].[UserTestQuestionId], [s].[UserTextAnswer], [s].[CorrectTextAnswer], [s].[QuestionType], [s].[Text], [s].[TopicId], [s].[Id2], [s].[IsCorrect], [s].[QuestionId0], [s].[Text0]
FROM [UserTests] AS [u]
INNER JOIN [AspNetUsers] AS [a] ON [u].[UserId] = [a].[Id]
INNER JOIN [Tests] AS [t] ON [u].[TestId] = [t].[Id]
LEFT JOIN [Topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
LEFT JOIN (
    SELECT [u0].[Id], [u0].[QuestionId], [u0].[UserTestId], [q].[Id] AS [Id0], [u1].[Id] AS [Id1], [u1].[AnswerOptionId], [u1].[UserTestQuestionId], [u1].[UserTextAnswer], [q].[CorrectTextAnswer], [q].[QuestionType], [q].[Text], [q].[TopicId], [a0].[Id] AS [Id2], [a0].[IsCorrect], [a0].[QuestionId] AS [QuestionId0], [a0].[Text] AS [Text0]
    FROM [UserTestQuestions] AS [u0]
    INNER JOIN [Questions] AS [q] ON [u0].[QuestionId] = [q].[Id]
    LEFT JOIN [UserTestAnswers] AS [u1] ON [u0].[Id] = [u1].[UserTestQuestionId]
    LEFT JOIN [AnswerOptions] AS [a0] ON [q].[Id] = [a0].[QuestionId]
) AS [s] ON [u].[Id] = [s].[UserTestId]
WHERE [u].[TestId] = @__testId_0
ORDER BY [u].[Id], [a].[Id], [t].[Id], [t0].[Id], [s].[Id], [s].[Id0], [s].[Id1]
2025-02-17 10:45:30.536 +05:00 [INF] Executing OkObjectResult, writing value of type 'QuizMasterAPI.Models.DTOs.TestAnalyticsWithHistoryDto'.
2025-02-17 10:45:30.536 +05:00 [INF] Executed action QuizMasterAPI.Controllers.AnalyticsController.GetTestAnalyticsWithHistory (QuizMasterAPI) in 28.0317ms
2025-02-17 10:45:30.536 +05:00 [INF] Executed endpoint 'QuizMasterAPI.Controllers.AnalyticsController.GetTestAnalyticsWithHistory (QuizMasterAPI)'
2025-02-17 10:45:30.536 +05:00 [INF] Request finished HTTP/2 GET https://localhost:44336/api/Analytics/full/8009 - 200 null application/json; charset=utf-8 29.3787ms
2025-02-17 10:46:33.231 +05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44336/api/topic - null null
2025-02-17 10:46:33.233 +05:00 [INF] CORS policy execution successful.
2025-02-17 10:46:33.233 +05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44336/api/topic - 204 null null 4.4391ms
2025-02-17 10:46:33.237 +05:00 [INF] Request starting HTTP/2 GET https://localhost:44336/api/topic - null null
2025-02-17 10:46:33.237 +05:00 [INF] CORS policy execution successful.
2025-02-17 10:46:33.238 +05:00 [INF] Executing endpoint 'TopicController.GetAll (QuizMasterAPI)'
2025-02-17 10:46:33.240 +05:00 [INF] Route matched with {action = "GetAll", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[QuizMasterAPI.Models.DTOs.TopicDto]]] GetAll() on controller TopicController (QuizMasterAPI).
2025-02-17 10:46:33.252 +05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CategoryId], [t].[Name]
FROM [Topics] AS [t]
2025-02-17 10:46:33.259 +05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[QuizMasterAPI.Models.DTOs.TopicDto, QuizMasterAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-02-17 10:46:33.260 +05:00 [INF] Executed action TopicController.GetAll (QuizMasterAPI) in 19.4791ms
2025-02-17 10:46:33.260 +05:00 [INF] Executed endpoint 'TopicController.GetAll (QuizMasterAPI)'
2025-02-17 10:46:33.260 +05:00 [INF] Request finished HTTP/2 GET https://localhost:44336/api/topic - 200 null application/json; charset=utf-8 23.2981ms
